---
- name: include task (CentOS/RHEL 6)
  include: centos6.yml
  when: ansible_distribution_major_version|int == 6

- name: include task (CentOS/RHEL 7)
  include: centos7.yml
  when: ansible_distribution_major_version|int == 7

- name: include task (CentOS/RHEL 8)
  include: centos8.yml
  when: ansible_distribution_major_version|int == 8

- name: stat ssl.conf
  stat:
    path: /etc/httpd/conf.d/ssl.conf
  register: is_ssl_conf
  when: ssl == true

- name: delete ssl.conf
  file:
    path: /etc/httpd/conf.d/ssl.conf
    state: absent
  notify: httpd restarted
  when:
    - ssl == true
    - is_ssl_conf.stat.exists

- name: httpd enabled
  service:
    name: httpd
    enabled: yes
  notify: httpd restarted
